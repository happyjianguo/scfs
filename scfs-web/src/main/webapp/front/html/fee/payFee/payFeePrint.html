<html>
<head>
<title></title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- FontAwesome 4.3.0 -->
<link href="../../../fonts/font-awesome-4.4.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css" />
<!-- Ionicons 2.0.1 -->
<link href="../../../fonts/ionicons-2.0.1/css/ionicons.min.css"
	rel="stylesheet" type="text/css" />
<!--bootstrap-->
<link href="../../../css/bootstrap_min.css" rel="stylesheet"
	type="text/css" />
<!--AdminLTE theme-->
<link href="../../../css/AdminLTE_min.css" rel="stylesheet"
	type="text/css" />
<!-- <link href="css/AdminLT_skins/_all-skins.min.css" rel="stylesheet" type="text/css" /> -->
<link href="../../../css/jquery.tag-editor.css" rel="stylesheet"
	type="text/css" />
<!--web css-->
<link rel="stylesheet"
	href="../../../js/plugins/jquery.datetimepicker/jquery.datetimepicker.css">
<link rel="stylesheet" href="../../../css/sys_setting_min.css">
<link rel="stylesheet" href="../../../css/mainframe_min.css">
<link rel="stylesheet"
	href="../../../js/plugins/bootstrap-table/bootstrap-table.min.css">
<style type="text/css">
@page {
	size: auto; /* auto is the initial value */
	margin: 0mm; /* this affects the margin in the printer settings */
}

body, table {
	font-size: 14px;
}

table {
	margin: auto;
}

table.head {
	font-size: 13px;
	margin-top: -5px;
}

table.head td {
	height: 10px;
	overflow: hidden;
	white-space: nowrap;
}

div.whole {
	margin: 0px auto;
	padding-top: 30px;
	width: 730px;
}

td {
	vertical-align: middle;
}

hr {
	margin: 5px 0 2px 0;
}

#qrcode img {
	vertical-align: middle;
	margin: auto;
}
</style>
</head>

<body>
	<div class="whole">
		<div class="print-top">
			<button class="btn btn-primary mb20 printBtn">打印</button>
			<button class="btn btn-default mb20 closeBtn">关闭</button>
		</div>
		<form class="form-horizontal form-inline" id="form1"
			data-url="fee/pay/detail">
			<table width="710px">
				<tr>
					<td>
						<table width="100%">
							<tr>
								<td align="center">
									<h3>
										<label class="js-initform" id="busiUnitName"
											name="busiUnitName"></label>
									</h3>
									<hr> <label class="js-initform" id="busiUnitAddress"
									name="busiUnitAddress"></label>
								</td>
								<td rowspan="2">
									<div id="qrcode"></div>
								</td>
							</tr>
							<tr>
								<td align="center" style="font-size: 20px; padding: 10px;">应付费用
								</td>
							</tr>
						</table>
					</td>
				</tr>
				<tr>
					<td></td>
				</tr>
				<tr>
					<td>
						<table width="100%">
							<tr>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;费用编号:&nbsp; <label class="js-initform" id="feeNo"
									name="feeNo">
								</td>
								<!-- <td width="25%" height="15px" align="left">
                                    &nbsp;&nbsp;经营单位:&nbsp;
                                    <label class="js-initform" id="busiUnitName" name="busiUnitName">
                                </td> -->
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;项目:&nbsp; <label class="js-initform"
									id="projectName" name="projectName">
								</td>
								<td width="25%" height="15px" align=left>
									&nbsp;&nbsp;打印时间:&nbsp; <!--  <input style="border:0px;border-bottom-style:none;border-top-style:none;border-left-style:none;border-right-style:none;"
                                    class="js_datePicker" id="systemTime" name="systemTime"/>-->
									<label class="js-initform" id="systemTime" name="systemTime"></label>
								</td>
							</tr>
							<tr>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;应付客户:&nbsp; <label class="js-initform"
									id="custReceiverName" name="custPayerName">
								</td>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;应付费用科目:&nbsp; <label class="js-initform"
									id="payFeeSpecName" name="recFeeSpecName">
								</td>
							</tr>
							<tr>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;应付方式:&nbsp; <label class="js-initform"
									id="payTypeName" name="payTypeName">
								</td>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;应付日期:&nbsp; <label class="js-initform" id="payDate"
									name="payDate">
								</td>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;币种:&nbsp; <label class="js-initform"
									id="currencyTypeName" name="currencyTypeName">
								</td>
							</tr>
							<tr>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;应付金额:&nbsp; <label class="js-initform"
									id="payAmount" name="payAmount">
								</td>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;已付金额:&nbsp; <label class="js-initform"
									id="paidAmount" name="paidAmount">
								</td>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;已收票金额:&nbsp; <label class="js-initform"
									id="acceptInvoiceAmount" name="acceptInvoiceAmount">
								</td>
							</tr>
							<tr>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;收票方式:&nbsp; <label class="js-initform"
									id="acceptInvoiceTypeName" name="acceptInvoiceTypeName">
								</td>
								<td width="25%" height="15px" align="left">
									&nbsp;&nbsp;收票税率:&nbsp; <label class="js-initform"
									id="acceptInvoiceTaxRate" name="acceptInvoiceTaxRate">
								</td>
							</tr>
							<tr>
								<td width="25%" height="15px" align="left" colspan='3'>
									&nbsp;&nbsp;备注:&nbsp; <label class="js-initform" id="payNote"
									name="payNote">
								</td>
							</tr>
						</table>
					</td>
				</tr>
			</table>
		</form>
	</div>
	<script src="../../../js/lib/jquery-1.9.1.min.js"
		type="text/javascript"></script>
	<script src="../../../js/lib/qrcode.min.js" type="text/javascript"></script>
	<script src='../../../js/plugins/bootstrap-table/bootstrap-table.js'
		type='text/javascript'></script>
	<script
		src='../../../js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js'
		type='text/javascript'></script>
	<script src='../../../js/plugins/layer/layer.js' type='text/javascript'></script>
	<script
		src="../../../js/plugins/jquery.datetimepicker/jquery.datetimepicker.full.min.js"></script>
	<script src="../../../js/common.js"></script>
</body>
<script>

		var id = GLOBAL.getParam("id");
		//$(".js_datePicker").datetimepicker('setDate' ,new Date());
		var editData = GLOBAL.getEditData($("#form1"), id);
		
		//var curDate = new Date();
		//$("#systemTime").text(curDate.format("yyyy-MM-dd"));
		//生成二维码, qrcode为二维码容器div的id，二维码的内容由text属性值指定，此例为editData.orderNo
		if(editData){
			var qrcode = new QRCode("qrcode", {
			    text: editData.feeNo,
			    width: 90,
			    height: 90,
			    colorDark : "#000000",
			    colorLight : "#ffffff",
			    correctLevel : QRCode.CorrectLevel.H
			});
		}

		$(".printBtn").click(function(){
			$(this).parent(".print-top").hide();
			closeAfterPrint();
		})
		$(".closeBtn").click(function(){
			window.close();
		})

		function closeAfterPrint() {
			if (document.execCommand("print")) {
				$(".print-top").show();
				var data = {
					id  : id ,
					billType : 7
				}
				GLOBAL.ajax("common/updatePrintNum", data, function() {
				});
			} else
				setTimeout("CloseAfterPrint();", 1000);
		}

		window.onafterprint = function(){
		   alert("Printing completed...");
		}

	</script>

</html>
