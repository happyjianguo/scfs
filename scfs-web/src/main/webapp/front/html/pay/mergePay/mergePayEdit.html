<div class="wrapper">
	<section class="content-header my-content-header">
		<ol class="breadcrumb">
			<li>当前位置</li>
			<li>资金</li>
			<li>合并付款</li>
			<li class="active">浏览</li>
		</ol>
	</section>
	<section class="product-wrap">
		<div class="box no-margin">
			<form class="form-horizontal form-inline" id="form1"
				data-url="mergePayOrder/detail">
				<div class="box-body">
					<ul class="nav nav-tabs">
						<li role="presentation" class="active"><a class="tab-item" data-url="html/pay/mergePay/mergePayEdit.html">基础信息</a></li>
						<li role="presentation"><a class="tab-item" data-url="html/pay/mergePay/mergePayRelEdit.html">付款明细</a></li>
					</ul>
					<input class="form-control js-initform" type="hidden" id="id"
						name="id">
					<table class="table table-bordered table-hover no-margin">
						<tr>
							<td class="text-right"><b>付款编号：</b></td>
							<td class="text-left"><label class="js-initform"
								id="mergePayNo" name="mergePayNo"></label></td>
						</tr>
						<tr>
							<td width="180" class="text-right"><b>付款类型：</b></td>
							<td class="text-left"><label class="js-initform"
								id="payTypeName" name="payTypeName"></label></td>
						</tr>
						<tr>
							<td width="180" class="text-right"><b>项目：</b></td>
							<td class="text-left"><label class="js-initform"
								id="projectName" name="projectName"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>付款单位：</b></td>
							<td class="text-left"><label class="js-initform"
								id="payerName" name="payerName"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>付款方式：</b></td>
							<td class="text-left"><label class="js-initform"
								id="payWayName" name="payWayName"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>币种：</b></td>
							<td class="text-left"><label class="js-initform"
								id="currencyTypeName" name="currencyTypeName"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>付款金额：</b></td>
							<td class="text-left"><label class="js-initform toThound"
								id="payAmount" name="payAmount" ></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>收款单位：</b></td>
							<td class="text-left"><label class="js-initform"
								id="payeeName" name="payeeName"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>收款账户：</b></td>
							<td class="text-left"><label class="js-initform"
								id="accountNo" name="accountNo"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>开户行：</b></td>
							<td class="text-left"><label class="js-initform"
								id="bankName" name="bankName"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>收款银行地址：</b></td>
							<td class="text-left"><label class="js-initform"
								id="bankAddress" name="bankAddress"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>收款账号开户人：</b></td>
							<td class="text-left"><label class="js-initform"
								id="subjectName" name="subjectName"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>收款银行代码：</b></td>
							<td class="text-left"><label class="js-initform"
								id="bankCode" name="bankCode"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>收款人电话：</b></td>
							<td class="text-left"><label class="js-initform"
								id="phoneNumber" name="phoneNumber"></label></td>
						</tr>
						<tr>
							<td class="text-right"><b>要求付款日期：</b></td>
							<td class="text-left"><input class="form-control js-initform js_datePicker"
								id="requestPayTime" name="requestPayTime"></td>
						</tr>
						<tr>
							<td class="text-right"><b>备注：</b></td>
							<td class="text-left"><textarea class="form-control js-initform"
								id="remark" name="remark" cols="50" rows="5"></textarea></td>
						</tr>
					</table>
					<div class="mt15">
                        <h4 class="mb10">审核记录</h4>
                        <table id="js_audit_dataTable" data-url="mergePayOrder/auditflow/audit/query"></table>
                    </div>
				</div>
				<!-- /.box-body -->

				<div class="box-footer text-center">
					<button type="submit" id="save" class="btn btn-primary btn-sm"  data-url="mergePayOrder/update">保存</button>
					<button type="button" id="back" data-url="html/pay/mergePay/mergePaySearch.html" class="btn btn-default btn-sm js-back">返回</button>
				</div>
				<!-- /.box-footer -->

			</form>
		</div>
	</section>
</div>

<script>
	options.initPage = function() {
		/*数据表格*/
		var tabColsLog = [{
		    title: '序号',
		    field: 'columnsNumber',
		    width: '5%'
		}, {
		    title: '流程节点',
		    field: "stateName",
		    width: '15%'
		}, {
		    title: '处理人',
		    field: "dealName",
		    width: '15%'
		}, {
		    title: '处理意见',
		    field: "suggestion",
		    width: '25%'
		}, {
		    title: '开始时间',
		    field: "createTime",
		    width: '15%'
		}, {
		    title: "处理时间",
		    field: "dealTime",
		    width: '15%'
		}, {
		    title: "处理状态",
		    field: "auditStateName",
		    width: '10%'
		}];

		GLOBAL.getEditData($("#form1"), options.param.id);

		GLOBAL.initTable($('#js_audit_dataTable'), tabColsLog, {
	        projectItemId: options.param.id
	    }, null, {
	        pagination: false
	    });
		
		$("#form1").validate({
	        rules: {
	            requestPayTime : {
					required : true,
				},
				remark : {
					maxlength : 200
				}
	        },
	        submitHandler: function() {
	          var data = $("#form1").serialize();
		      GLOBAL.ajax("mergePayOrder/update",data, function(e){
	        	  if (e.success) {
	            	  layer.msg("保存成功！", {
	                      icon: 1,
	                      time: 1500
	                  },function(){
	                  });
	              } else {
	                  layer.msg(e.msg);
	              }
	          });
			}
	    });
	    $(".js_datePicker").datetimepicker({
	        format:'Y-m-d',
	    });
	};
	GLOBAL.goBack();
</script>
