<!DOCTYPE html>
<html>
<head>
<title>供应链金融</title>
<!-- FontAwesome 4.3.0 -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--bootstrap-->
<link href="../../../css/bootstrap_min.css" rel="stylesheet"
	type="text/css" />
<!--AdminLTE theme-->
<link href="../../../css/AdminLTE_min.css" rel="stylesheet"
	type="text/css" />
<!-- <link href="css/AdminLT_skins/_all-skins.min.css" rel="stylesheet" type="text/css" /> -->
<link href="../../../css/jquery.tag-editor.css" rel="stylesheet"
	type="text/css" />
<link rel="stylesheet" href="../../../css/sys_setting_min.css">
<link rel="stylesheet" href="../../../css/mainframe_min.css">
<link rel="stylesheet"
	href="../../../js/plugins/bootstrap-table/bootstrap-table.min.css">
</head>

<body>
	<div class="wrapper">
		<!--引入面包屑-->
		<section class="product-wrap">
			<div class="box no-margin">
				<div class="box-header">
					<h3>费用明细</h3>
				</div>
				<form class="form-horizontal">
					<div class="box-body">
						<table class="table table-bordered table-hover no-margin">
							<tr>
								<td width="180" class="text-right"><b>费用编号：</b></td>
								<td class="text-left"><span id="feeNo" name="feeNo"></span></td>
							</tr>
							<tr>
								<td class="text-right"><b>项目：</b></td>
								<td class="text-left"><span id="projectName"
									name="projectName"></span></td>
							</tr>
							<tr>
								<td class="text-right"><b>币种：</b></td>
								<td class="text-left"><span id="currencyTypeName"
									name="currencyTypeName"></span></td>
							</tr>

							<tr class="cls_fee_rec">
								<td class="text-right"><b>应收客户：</b></td>
								<td class="text-left"><span id="custPayerName"
									name="custPayerName"></span></td>
							</tr>
							<tr class="cls_fee_rec">
								<td class="text-right"><b>费用科目：</b></td>
								<td class="text-left"><span id="recFeeSpecName"
									name="recFeeSpecName"></span></td>
							</tr>
							<tr class="cls_fee_rec">
								<td class="text-right"><b>应收方式：</b></td>
								<td class="text-left"><span id="recTypeName"
									name="recTypeName"></span></td>
							</tr>
							<tr class="cls_fee_rec">
								<td class="text-right"><b>应收日期：</b></td>
								<td class="text-left"><span id="recDate" name="recDate"></span></td>
							</tr>
							<tr class="cls_fee_rec">
								<td class="text-right"><b>应收金额：</b></td>
								<td class="text-left"><span id="recAmount" class="cash"
									name="recAmount"></span></td>
							</tr>
							<tr class="cls_fee_rec">
								<td class="text-right"><b>已收金额：</b></td>
								<td class="text-left"><span id="receivedAmount"
									class="cash" name="receivedAmount"></span></td>
							</tr>
							<tr class="cls_fee_rec">
								<td class="text-right"><b>已开票金额：</b></td>
								<td class="text-left"><span id="provideInvoiceAmount"
									class="cash" name="provideInvoiceAmount"></span></td>
							</tr>
							<tr class="cls_fee_rec">
								<td class="text-right"><b>开票方式：</b></td>
								<td class="text-left"><span id="provideInvoiceTypeName"
									name="provideInvoiceTypeName"></span></td>
							</tr>
							<tr class="cls_fee_rec">
								<td class="text-right"><b>开票税率：</b></td>
								<td class="text-left"><span id="provideInvoiceTaxRateStr"
									name=""provideInvoiceTaxRateStr""></span></td>
							</tr>

							<tr class="cls_fee_pay">
								<td class="text-right"><b>应付客户：</b></td>
								<td class="text-left"><span id="custReceiverName"
									name="custReceiverName"></span></td>
							</tr>
							<tr class="cls_fee_pay">
								<td class="text-right"><b>应付费用科目：</b></td>
								<td class="text-left"><span id="payFeeSpecName"
									name="payFeeSpecName"></span></td>
							</tr>
							<tr class="cls_fee_pay">
								<td class="text-right"><b>应付方式：</b></td>
								<td class="text-left"><span id="payTypeName"
									name="payTypeName"></span></td>
							</tr>
							<tr class="cls_fee_pay">
								<td class="text-right"><b>应付日期：</b></td>
								<td class="text-left"><span id="payDate" name="payDate"></span></td>
							</tr>
							<tr class="cls_fee_pay">
								<td class="text-right"><b>应付金额：</b></td>
								<td class="text-left"><span id="payAmount" class="cash"
									name="payAmount"></span></td>
							</tr>
							<tr class="cls_fee_pay">
								<td class="text-right"><b>已付金额：</b></td>
								<td class="text-left"><span id="paidAmount" class="cash"
									name="paidAmount"></span></td>
							</tr>
							<tr class="cls_fee_pay">
								<td class="text-right"><b>已收票金额：</b></td>
								<td class="text-left"><span id="acceptInvoiceAmount"
									class="cash" name="acceptInvoiceAmount"></span></td>
							</tr>
							<tr class="cls_fee_pay">
								<td class="text-right"><b>收票方式：</b></td>
								<td class="text-left"><span id="acceptInvoiceTypeName"
									name="acceptInvoiceTypeName"></span></td>
							</tr>
							<tr class="cls_fee_pay">
								<td class="text-right"><b>收票税率：</b></td>
								<td class="text-left"><span id="acceptInvoiceTaxRateStr"
									name="acceptInvoiceTaxRateStr"></span></td>
							</tr>

							<tr>
								<td class="text-right"><b>备注：</b></td>
								<td class="text-left"><span id="recNote" name="recNote"></span></td>
							</tr>
						</table>
						<div class="mt15">
							<h4 class="mb10">审核记录</h4>
							<table id="js_audit_dataTable"
								data-permissionUrl="/fee/auditflow/audit/query"
								data-url="fee/auditflow/audit/query"></table>
						</div>
						<!-- .box-body -->
						<div class="box-footer text-center">
							<button type="button" id="closeWin"
								class="btn btn-default btn-sm">关闭</button>
						</div>
					</div>
				</form>
			</div>
		</section>
	</div>
	<script src="../../../js/lib/jquery-1.9.1.min.js"
		type="text/javascript"></script>
	<script src="../../../js/lib/qrcode.min.js" type="text/javascript"></script>
	<script src='../../../js/plugins/bootstrap-table/bootstrap-table.js'
		type='text/javascript'></script>
	<script
		src='../../../js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js'
		type='text/javascript'></script>
	<script src='../../../js/plugins/layer/layer.js' type='text/javascript'></script>
	<script src="../../../js/common.js"></script>
</body>
<script>
	var id = GLOBAL.getParam("id");
	options.param.id = id;
	var reportFeeType = GLOBAL.getParam("reportFeeType");
	options.param.reportFeeType = reportFeeType;

	/*数据表格*/
	var tabCols = [{
	    title: '序号',
	    field: 'columnsNumber',
	    width: '5%'
	}, {
	    title: '流程节点',
	    field: "stateName",
	    width: '15%'
	},{
	    title: '处理人',
	    field: "dealName",
	    width: '15%'
	},{
	    title: '处理意见',
	    field: "suggestion",
	    width: '25%'
	},{
	    title: '开始时间',
	    field: "createTime",
	    width: '15%'
	},{
	    title: "处理时间",
	    field: "dealTime",
	    width: '15%'
	},{
	    title: "处理状态",
	    field: "auditStateName",
	    width: '10%'
	}];

	var callback = function(reply) {
		var data = reply.items;

		for ( var i in data) {
			var value = data[i];
			
			var element = $("#" + i) ;
			if (element.hasClass("cash")) {
				element.text(value == null ? "" : value.toThounds());
			}else {
				element.text(value == null ? "" : value);
			}
		}
		if (reportFeeType == 1) {
			$('.cls_fee_rec').show();
			$('.cls_fee_pay').hide();
		}
		if (reportFeeType == 2) {
			$('.cls_fee_rec').hide();
			$('.cls_fee_pay').show();
		}
		if (reportFeeType == 3) {
			$('.cls_fee_rec').show();
			$('.cls_fee_pay').show();
		}
	}
	
	GLOBAL.ajax("fee/receive/detail", options.param, callback);
	
	GLOBAL.initTable($('#js_audit_dataTable'), tabCols, {
        feeId: options.param.id
    }, null, {
        pagination: false
    });
	
	$("#closeWin").click(function(){
		window.close();
	});
	
</script>