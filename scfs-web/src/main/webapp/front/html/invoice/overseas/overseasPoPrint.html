<html>
<head>
<title>境外开票打印</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- FontAwesome 4.3.0 -->
<link href="../../../fonts/font-awesome-4.4.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css" />
<!-- Ionicons 2.0.1 -->
<link href="../../../fonts/ionicons-2.0.1/css/ionicons.min.css"
	rel="stylesheet" type="text/css" />
<!--bootstrap-->
<link href="../../../css/bootstrap_min.css" rel="stylesheet"
	type="text/css" />
<!--AdminLTE theme-->
<link href="../../../css/AdminLTE_min.css" rel="stylesheet"
	type="text/css" />
<!-- <link href="css/AdminLT_skins/_all-skins.min.css" rel="stylesheet" type="text/css" /> -->
<link href="../../../css/jquery.tag-editor.css" rel="stylesheet"
	type="text/css" />
<!--web css-->
<link rel="stylesheet"
	href="../../../js/plugins/jquery.datetimepicker/jquery.datetimepicker.css">
<link rel="stylesheet" href="../../../css/sys_setting_min.css">
<link rel="stylesheet" href="../../../css/mainframe_min.css">
<link rel="stylesheet"
	href="../../../js/plugins/bootstrap-table/bootstrap-table.min.css">
<style type="text/css">
@page {
	size: auto; /* auto is the initial value */
	margin: 0mm; /* this affects the margin in the printer settings */
}

body, table {
	font-size: 14px;
}

table {
	margin: auto;
}

table.head {
	font-size: 13px;
	margin-top: -5px;
}

table.head td {
	height: 10px;
	overflow: hidden;
	white-space: nowrap;
}

div.whole {
	margin: 0px auto;
	padding-top: 30px;
	width: 730px;
}

td {
	vertical-align: middle;
}

hr {
	margin: 5px 0 2px 0;
}

#qrcode img {
	vertical-align: middle;
	margin: auto;
}
</style>
</head>

<body>
	<div class="whole">
		<div class="print-top">
			<button class="btn btn-primary mb20 printBtn">打印</button>
			<button class="btn btn-default mb20 closeBtn">关闭</button>
		</div>
		<form class="form-horizontal form-inline" id="form1"
			data-url="invoiceOverseas/detail">
			<table width="100%;" style="border: 1px solid #000;"
				class="billDelivery_table">
				<thead>
					<tr>
						<td
							style='border: 1px solid #000; height: 45px; text-align: center; padding: 5px; font-size: 16px;'
							colspan="7"><strong>COMMERCIAL INVOICE</strong><br /> <strong>商&nbsp;业&nbsp;发&nbsp;票</strong>
						</td>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td
							style='border: 1px solid #000; padding: 5px; text-align: left; width: 53%; font-size: 5px;'
							colspan="3" rowspan="3">SHIPPER:<br />
						<label class="js-initform" id="customerChineseName"
							name="customerChineseName"></label></td>
						<td
							style='border: 1px solid #000; padding: 5px; text-align: left; font-size: 5px;'
							colspan="4">CONTRACT NO(单据号):<label class="js-initform"
							id="billNo" name="billNo"></label></td>
					</tr>
					<tr>
						<td
							style='border: 1px solid #000; padding: 5px; text-align: left; font-size: 5px;'
							colspan="4">INVOICE NO(发票号):<label class="js-initform"
							id="applyNo" name="applyNo"></label></td>
					</tr>
					<tr>
						<td
							style='border: 1px solid #000; padding: 5px; text-align: left; font-size: 5px;'
							colspan="4">INVOICE DATE(发票日期):<label class="js-initform"
							id="createAt" name="createAt"></label></td>
					</tr>
					<tr>
						<td
							style='border: 1px solid #000; height: 180px; padding: 5px; text-align: left; font-size: 5px;'
							colspan="3" rowspan="3">CONSIGNEE:<br /> <!-- 中文名 -->
							<label class="js-initform" id="businessChineseName"
							name="businessChineseName"></label><br /> <!-- 英文名-->
							<label class="js-initform" id="englishName" name="englishName"></label><br />
							<!-- 中文办公地址-->
							<label class="js-initform" id="address" name="address"></label><br />
							<!-- 英文办公地址<br/> --> <!-- 电话 -->TEL:<label class="js-initform"
							id="regPhone" name="regPhone"></label><br />

						</td>
						<td
							style='border: 1px solid #000; height: 100px; padding: 5px; text-align: left; font-size: 5px;'
							colspan="4">COUNTRY OF ORIGIN:<label class="js-initform"
							id="regPlace" name="regPlace"></label><br /> 原厂地:<label
							class="js-initform" id="regPlace" name="regPlace"></label><br />
						</td>
					</tr>
					<tr>
						<td
							style='border: 1px solid #000; height: 20px; padding: 5px; text-align: left; font-size: 5px;'
							colspan="4">COUNTRY OF DESTINATION:HK<br /> 目的地:香港
						</td>
					</tr>
					<tr>
						<td
							style='border: 1px solid #000; height: 20px; padding: 5px; text-align: left; font-size: 5px;'
							colspan="4"></td>
					</tr>

					<tr style="height: 50px;">
						<td
							style='border: 1px solid #000; padding: 5px; font-size: 5px; text-align: left; width: 15%;'>
							TIME NO.<br /> 编号
						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; width: 28%; text-align: left;">
							NOGOOD NAME<br /> 品名
						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; text-align: left; width: 13%;">
							QUANTTY<br /> 数量
						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; text-align: left; width: 9%;">
							UNIT<br /> 单位
						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; text-align: left; width: 11%;">
							UNIT PRICE<br /> 单价
						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; text-align: left;">
							AMOUNT<br /> 合计
						</td>
					</tr>
				</tbody>
				<tfoot>
					<tr style="height: 30px;">
						<td
							style='border: 1px solid #000; padding: 5px; font-size: 5px; text-align: left; width: 15%;'>
							TOTAL:</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; width: 28%; text-align: left;">
						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; text-align: left; width: 13%;">
							<label class="js-initform" id="sumNum" name="sumNum"></label>
						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; text-align: left; width: 9%;">
						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; text-align: left; width: 11%;">

						</td>
						<td
							style="border: 1px solid #000; padding: 0 5px; font-size: 5px; text-align: left;">
							<label class="js-initform" id="sumAmount" name="sumAmount"></label>
						</td>
					</tr>
				</tfoot>
			</table>
		</form>
	</div>
	<script src="../../../js/lib/jquery-1.9.1.min.js"
		type="text/javascript"></script>
	<script src="../../../js/lib/qrcode.min.js" type="text/javascript"></script>
	<script src='../../../js/plugins/bootstrap-table/bootstrap-table.js'
		type='text/javascript'></script>
	<script
		src='../../../js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js'
		type='text/javascript'></script>
	<script src='../../../js/plugins/layer/layer.js' type='text/javascript'></script>
	<script src="../../../js/common.js"></script>
</body>
<script>
var id = GLOBAL.getParam("id");
var editData = GLOBAL.getEditData($("#form1"), id);


 GLOBAL.ajax("invoiceOverseasPoAll/query", {overseasId: id}, function(result) {
	if (result.items) {
		var tbody = "";
		for (var i = 0; i < result.items.length; i++) {
			var data = result.items[i];
			var tr = "<tr style='height: 50px;'>" 
    				+ "<td style='border: 1px solid #000; padding: 5px;font-size: 5px;text-align: left;width: 15%;'> " + data.goodsNumber + "</td>"
    				+ "<td style='border: 1px solid #000; padding:0 5px;font-size: 5px;width: 28%;text-align: left;'> " + data.goodsName + "</td>"
    				+ "<td style='border: 1px solid #000; padding:0 5px;font-size: 5px;text-align: left;width: 13%;'> " + data.invoiceNum + "</td>"
    				+ "<td style='border: 1px solid #000; padding:0 5px;font-size: 5px;text-align: left;width: 9%;'> " + data.unit + "</td>"
    				+ "<td style='border: 1px solid #000; padding:0 5px;font-size: 5px;text-align: left;width: 11%;'> " + data.costPrice + "</td>"
    				+ "<td style='border: 1px solid #000; padding:0 5px;font-size: 5px;text-align: left;'> " + data.invoiceAmount + "</td>"
    				+ "</tr>";
			tbody += tr;
        }
        $(".billDelivery_table").find("tbody").append(tbody);             
	}
});

		$(".printBtn").click(function(){
			$(this).parent(".print-top").hide();
			closeAfterPrint();
		})
		$(".closeBtn").click(function(){
			window.close();
		})

		function closeAfterPrint() {
			if (document.execCommand("print")) {
				$(".print-top").show();
				var data = {
					id  : id ,
					billType : 19
				}
				GLOBAL.ajax("common/updatePrintNum", data, function() {
				});
			} else
				setTimeout("CloseAfterPrint();", 1000);
		}

		window.onafterprint = function(){
		   alert("Printing completed...");
		}

	</script>

</html>
