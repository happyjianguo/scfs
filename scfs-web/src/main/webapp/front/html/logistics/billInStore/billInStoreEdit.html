<div class="wrapper">
  <ol class="breadcrumb">
    <li>当前位置</li>
    <li>物流</li>
    <li>入库单</li>
    <li class="active">基本信息编辑</li>
  </ol>
  <section class="product-wrap">
        <div class="box no-margin"> 
          <form class="form-horizontal form-inline" id="billInStoreEditForm" data-url="billInStore/edit">
            <div class="box-body">
                <ul class="nav nav-tabs"> 	  
               	  <li role="presentation" class="active"><a class="tab-item" data-url="html/logistics/billInStore/billInStoreEdit.html">基础信息</a></li>
                  <li role="presentation"><a class="tab-item" data-url="html/logistics/billInStore/billInStoreDtlEdit.html">收货明细</a></li>
                  <li role="presentation"><a class="tab-item" data-url="html/logistics/billInStore/billInStoreTallyDtlEdit.html">理货明细</a></li>
                  <li role="presentation"><a class="tab-item" data-url="html/logistics/billInStore/attachment.html">附件</a></li>
                </ul>
                 <input class="js-initform" type="hidden" id="id" name="id">
                
                 <table class="table table-bordered table-hover no-margin">
                    <tr>
                      <td width="180" class="text-right"><b>入库编号：</b></td>
                      <td class="text-left">
                        <label class="js-initform" id="billNo" name="billNo"></label>
                      </td>
                    </tr>
                    <tr>
                      <td class="text-right"><b>入库附属编号：<em class="text-star">*</em></b></td>
                      <td class="text-left">
                        <input style="width:300px" type="text" class="form-control js-initform" id="affiliateNo" name="affiliateNo">
                      </td>
                    </tr>
                    <tr>
                      <td class="text-right"><b>入库类型：<em class="text-star">*</em></b></td>
                      <td class="text-left">
                         <label class="js-initform" id="billTypeName" name="billTypeName"></label>
                         <input class="js-initform" type="hidden" id="billType" name="billType">
                      </td>
                    </tr>
                  	<tr>
                      <td class="text-right"><b>项目：<em class="text-star">*</em></b></td>
                      <td class="text-left">
                      	  <label class="js-initform" id="projectName" name="projectName"></label>
                          <input class="js-initform" type="hidden" id="projectId" name="projectId">
                      </td>
                    </tr>
                    <tr>
                      <td class="text-right"><b>供应商：<em class="text-star">*</em></b></td>
                      <td class="text-left">
                      	  <label class="js-initform" id="supplierName" name="supplierName"></label>
                          <input class="js-initform" type="hidden" id="supplierId" name="supplierId">
                      </td>
                    </tr>
                    <tr>
                      <td class="text-right"><b>客户：</b></td>
                      <td class="text-left">      
                          <label class="js-initform" id="customerName" name="customerName"></label>
                          <input class="js-initform" type="hidden" id="customerId" name="customerId">                                         	
                      </td>
                    </tr>
                    <tr>
                      <td class="text-right"><b>仓库：<em class="text-star">*</em></b></td>
                      <td class="text-left">
                        <label class="js-initform" id="warehouseName" name="warehouseName"></label>
                        <input class="js-initform" type="hidden" id="warehouseId" name="warehouseId">
                      </td>
                    </tr>
                    <tr>
                      <td class="text-right"><b>币种：<em class="text-star">*</em></b></td>
                      <td class="text-left">
                        <label class="js-initform" id="currencyTypeName" name="currencyTypeName"></label>
                      </td>
                    </tr>
                    <tr>
                      <td class="text-right"><b>收货日期：<em class="text-star">*</em></b></td>
                      <td class="text-left">
                        <input style="width:300px" type="text" class="form-control js-initform js_datePicker" id="receiveDate" name="receiveDate">
                      </td>
                    </tr>
                    <tr>
                      <td class="text-right"><b>入库人：</b></td>
                      <td class="text-left"><label class="js-initform" id="acceptor"></label></td>
                    </tr>  
                    <tr>
                      <td class="text-right"><b>入库时间：</b></td>
                      <td class="text-left"><label class="js-initform" id="acceptTime"></label></td>
                    </tr>          
                    <tr>
                      <td class="text-right"><b>创建人：</b></td>
                      <td class="text-left"><label class="js-initform" id="creator"></label></td>
                    </tr>  
                    <tr>
                      <td class="text-right"><b>创建时间：</b></td>
                      <td class="text-left"><label class="js-initform" id="createAt"></label></td>
                    </tr>         
                    <tr>
                      <td class="text-right"><b>备注：</b></td>
                      <td class="text-left">
                        <textarea class="form-control js-initform" id="remark" cols="50" rows="5" name="remark"></textarea>  
                      </td>
                    </tr>
                  </table>
            </div>
            <!-- /.box-body -->

            <div class="box-footer text-center">
              <button type="submit" data-permissionUrl="/billInStore/update" id="save" class="btn btn-primary btn-sm">保存</button>
              <button type="button" data-url="html/logistics/billInStore/billInStoreSearch.html" class="btn btn-default btn-sm js-back">返回</button>
            </div>
            <!-- /.box-footer -->

          </form>
        </div>
  </section>
</div>
 
<script>
  options.initPage = function(){
  	  GLOBAL.getEditData($("#billInStoreEditForm"), options.param.id);
      $(".js_datePicker").datetimepicker({format:"Y-m-d", timepicker:false});
      var billType = $("#billType").val();
      if (billType == 2) {	//调拨入库
  	      $("#save").hide();
       	  $("#billInStoreEditForm").find("#affiliateNo").attr("disabled", true);
       	  $("#billInStoreEditForm").find("#receiveDate").attr("disabled", true);
       	  $("#billInStoreEditForm").find("#remark").attr("disabled", true);
      }
      
      $("#billInStoreEditForm").validate({
          rules: {
        	  affiliateNo: {
          		  required: true
          	  },
	          projectId: {
	              required: true
	          },
	          supplierId: {
	              required: true
	          },
	          warehouseId: {
	           	  required: true
	          },
	          receiveDate: {
	              required: true
	          }
          },
          submitHandler: function() {
              var formData = $("#billInStoreEditForm").serializeObject();
              GLOBAL.ajax("billInStore/update", formData, function(e) {
              	  if (e.success) {
                      layer.msg("保存成功！");
                  } else {
                  	  layer.msg(e.msg);
                  }
              });
           }
      });
  }

  GLOBAL.goBack();

</script>
